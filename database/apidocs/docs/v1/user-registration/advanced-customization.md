# Advanced Customization

---

This is a look at more advanced modification you can make to your LoginRadius interfaces

{{table_container}}

##Label Customization Hook
This hook provides you with ​a quick and easy way to access and customize the labels for your user registration form.

```
	// "form-name": "New Label"
	LoginRadiusRaaS.$hooks.setFormCustomLabel({
		"emailid" : "Email Address",
		"password" : "Password"
	});
```

##Placeholder Customization Hook
This hook helps you setup customized placeholders for form elements.

```
  LoginRadiusRaaS.$hooks.setFormPlaceholder({
    'emailid' : 'Enter your email address', // name of the form input
    'password': 'Enter Your password'
 });
```

##Process Start/End Hook
This hook adds behaviours when the form is being rendered or submitted. The first parameter defines the actions when the process starts, and the second parameter defines the actions when the process finishes.
Use cases: "show loading animation image", "customize the form element", etc ..

```
 LoginRadiusRaaS.$hooks.setProcessHook(function() {
    //call on process start
}, function() {
    //call on process end
});
```

##Raw Registration Schema
In some cases you want to compare user's profile with the schema you defined in LoginRadius user Admin-console. You can call this function to retrieve the raw schema you defined in your account admin-console as the first parameter, and when user login from Social ID provider, the profile will get passed as the second parameter.

```
 LoginRadiusRaaS.$hooks.setRegistrationSchemsFilterHook(registerationSchemsHook);

function registerationSchemsHook(regSchema, userprofiles) {
  // console.log( regSchema );
  // console.log( userprofiles );
}
```

##Social Login Render Hook
If a user is using social login, then there are chances that the social provider doesn’t provide the required fields that are needed while implementing registration so you can implement this function to trigger events after the registration form renders. We can hide the social login interface when the missing required fields form renders.
Use cases: "hide the social login interface when the missing required fields form renders"

```
 LoginRadiusRaaS.$hooks.socialLogin.onFormRender = function() {
    //on social login form render
};


```

##Custom Error Message Hook
This hook allows you to write custom error messages and descriptions based on the error code generated by LoginRadius.

Single:

```
 LoginRadiusRaaS.$hooks.mapErrorMessages({
    code: 966,
    message: "Username password are wrong",
    description: "Username password are wrong, please enter correct combination of username password"
});

LoginRadiusRaaS.$hooks.mapErrorMessages({
    code: 967,
    message: "email id is not valid formatted",
    description: "email id is not valid formatted"
});
```

Multiple:

```
 LoginRadiusRaaS.$hooks.mapErrorMessages([{
    code: 966,
    message: "Username password are wrong",
    description: "Username password are wrong, please enter correct combination of username password"
}, {
    code: 967,
    message: "email id is not valid formatted",
    description: "email id is not valid formatted"
}]);
```

##Custom Validation Message Hook

This hook allows writing custom validation messages by rules generated from LoginRadius.
%s will be replaced by field name.

Single:

```
 LoginRadiusRaaS.$hooks.mapValidationMessages({
    rule: "required",
    message: "The %s field is required."
});

LoginRadiusRaaS.$hooks.mapValidationMessages({
    rule: "valid_email",
    message: "The %s field must contain a valid email address."
});
```

Multiple:

```
 LoginRadiusRaaS.$hooks.mapValidationMessages([{
    rule: "required",
    message: "The %s field is required."
}, {
    rule: "valid_email",
    message: "The %s field must contain a valid email address."
}]);
```

You can also target specific fields and map custom validation messages for each field. Do this by overriding the rule with `#<fieldname>` as shown below:

```
 LoginRadiusRaaS.$hooks.mapValidationMessages([{
		rule: "required#emailid",
		message: "The %s field is required field."
	}, {
		rule: "required#password",
		message: "The %s field is required property."
	},{
		rule: "required",
		message: "The %s field is required."
	}]
 );
```

##Custom Validation Hook
This hook allows you to add validations to your form fields. The supported validations are listed below.

Single:

```
 LoginRadiusRaaS.$hooks.setValidationRules({
	"emailid" : "required|alpha"
});
```

Multiple:

```
 LoginRadiusRaaS.$hooks.setValidationRules({
	"emailid" : "required|alpha",
  "name" : "required"
});
```

Custom Regex:

```
LoginRadiusRaaS.$hooks.setValidationRules({
        "password"  : "min_length[8]|custom_validation[^[1-3]+$or^[5-9]+$###pass digit only 1-3 or 5-9]"
},true)

```

Replace the "|" operator with word "or", because in the case of multiple rules we assume this as a delimiter.
<br>

You can define rules for each field, and supported rules are:

| Rule              | Regular Expression                                                                                               |
| ----------------- | ---------------------------------------------------------------------------------------------------------------- |
| alpha             | `/^[a-z]+$/i`                                                                                                    |
| alpha_dash        | `/^[a-z0-9_-]+$/i`                                                                                               |
| exact_length      | No regex                                                                                                         |
|                   | usage:exact_length[integer]                                                                                      |  |
| matches           | No regex                                                                                                         |
|                   | usage:matches[parameter-name]                                                                                    |  |
| max_length        | No regex                                                                                                         |
|                   | usage: max_length[integer]                                                                                       |
| min_length        | No regex                                                                                                         |
|                   | usage: min_length[integer]                                                                                       |
| numeric           | `/^[0-9]+$/`                                                                                                     |
| required          | No regex                                                                                                         |
| valid_ca_zip      | `[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$`                                                      |
| valid_email       | `\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$`                                                                  |
| valid_ip          | {{IP_FORMAT}}                                                                                                    |
| valid_url         | {{URL_FORMAT}}                                                                                                   |
| custom_validation | Can be used to implement your custom regEx for any field. ### is the separator for the regEx and custom message. |
|                   | Usage:custom_validation[regEx###Custom-Message]                                                                  |

Some examples:

```
 LoginRadiusRaaS.$hooks.setValidationRules({
  "emailid" : "required|valid_email",
  "name" : "required|max_length[32]|min_length[3]"
});

/* ----------------------------------------------------- */

LoginRadiusRaaS.$hooks.setValidationRules({
  "emailid" : "required|valid_email",
  "name" : "required|alpha_dash",
  "phone" : "required|exact_length[10]"
});


/* ----------------------------------------------------- */

LoginRadiusRaaS.$hooks.setValidationRules({
  "emailid" : "required|valid_email",
  "password" : "required",
  "confirmpassword" : "matches[password]",
  "phone" : "required|exact_length[10]"
});


/* ----------------------------------------------------- */

LoginRadiusRaaS.$hooks.setValidationRules({
  "emailid" : "required|valid_email",
  "zipcode" : "custom_validation[^\d{5}(-\d{4})?$###Invalid zipCode format. US format zip code formats (e.g., '94105-0011' or '94105')]"
});
```

Pipe Character: The Pipe "|" Character can be represented with the use of "or"

For Example:

```
custom_validation[^[1-3]+$|^[5-9]+$###pass digit only 1-3 or 5-9]
```

Becomes:

```
custom_validation[^[1-3]+$or^[5-9]+$###pass digit only 1-3 or 5-9]
```

> Note
>
> If there is a backslash `\` in your regex then please escape it with another backslash `\\`.
>
> For example:
> `^\\d{5}(-\\d{4})?`

##Custom Attribute Hook
This hook allows to append custom attributes to LoginRadius form fields, these attributes are HTML attribute that modify an HTML element type.

Single:

```
 LoginRadiusRaaS.$hooks.setAttributes({
	"emailid" : "autocomplete=off"
});
```

Multiple:

Multiple Attributes can be added to the field by separating each attribute by Ampersand (&).

```
 LoginRadiusRaaS.$hooks.setAttributes({
	"Name" : "autocomplete=off&maxlength=10"
});
```

## Email Template Customizations

All of the automated emails used in our User Registration system are completely customizable. You can refer to [this documentation](https://support.loginradius.com/hc/en-us/articles/203402419-User-Registration-Email-Message-Customization) in order to setup custom email templates or set a custom SMTP server.

Multiple Social Login Interfaces On Same Page
To generate multiple social login interfaces on same page, and make all of them work separately:
Javascript:

```
 $SL.util.ready(function() {

  LoginRadiusRaaS.init(option, 'sociallogin', function(response) {
    // On Success
  }, function(errors) {
    // on Errors
  }, "social1");
});
$SL.util.ready(function() {

  LoginRadiusRaaS.init(option, 'sociallogin', function(response) {
    // On Success
  }, function(errors) {
    // On Errors
  }, "social2");
});
```

HTML:

```
<div class = "interfacecontainerdiv" id = "social1" > </div>

<div class = "interfacecontainerdiv" id = "social2" > </div>
```

##Google Recaptcha
You can utilize your own Google ReCaptcha account to service your interfaces. This allows you to include additional domains and view analytics for your ReCaptcha. Follow the below steps to include your Google ReCaptcha account on your LoginRadius Registration interface.

1. Create an Account on Google ReCaptcha: https://www.google.com/recaptcha/intro/index.html
2. Create a ReCaptcha Site and add the domains that will be using this ReCaptcha.
3. Add the **V2RecaptchaSiteKey** and **V2Recaptcha** parameters to your LoginRadius User Registration options object during interface initialization as per this [documentation](/api/v1/user-registration/user-registration-getting-started)

```
option = {};
option.apikey = "<Your LoginRadius API key>";
option.appName = "<LoginRadius Site Name>";
option.V2Recaptcha = true;
option.V2RecaptchaSiteKey = 'Your Google recaptcha v2 Site key';
```

4.On your LoginRadius Account Admin Console navigate to API Configuration->Registration Service->Advanced options and input your Site Key and Secret

5.You can add additional additional logic after the recaptcha has loadded by adding the following option:

```
option.recaptchaV2OnloadCallback = "onloadCallback";
```

and then including a onload function like:

```
var onloadCallback = function () {
			//Call additional logic here
       };
```

##Advanced User Registration Methods
The following methods return the Account ID (UID) and Token for the currently logged in user. These functions can be utilized after the user login.

To get Account ID (UID):

```
 LoginRadiusRaaS.sessionData.getUid();
```

To get Access Token:

```
 LoginRadiusRaaS.sessionData.getToken();

```

##One Click Login Feature
Enabling this option on the LoginRadius site lets the end user to enter his email address and click on the one click sign-in button. A verification email gets sent to the user's email address and when user clicks on the link included in the verification email, the user gets logged into the account. The user can also log into​ the account if they forgot their password without using the password reset interface.

> One click Login

> One click login has to be enabled on your LoginRadius site in order to use this feature. Please reach out to LoginRadius support team if you need more details about it.

**Step 1**: Add the JavaScript framework reference to your web page – LoginRadius User Registration framework, If you have already referenced it please skip this ​step.

```
 <script src="https://auth.lrcontent.com/v1/js/LoginRadiusRaaS.js"></script>
```

**Step 2**: Add the One Click Login parameter in User Registration JS:

```
	var raasOptions={};
    raasOptions.apiKey="Your LoginRadius API Key";
    raasOptions.oneClickSignin=true;
    raasOptions.oneClickSigninUrl="Site URL"; //URL Where the one click login event will be handled
```

- One click login button text can be customised​ using the following parameter:

```
     raasOptions.oneClickLoginButtonLabel="Click Me"; //One Click Login Button Label
```

**Step 3**: Handle One Click Login Event - The following logic can be added to the page where you want to handle the one click login event, More precisely, Add the following logic on configured raasOptions.oneClickSigninUrl.

```
 if (vtype == "oneclicksignin") {
    LoginRadiusRaaS.init(raasoption, 'oneclicksignin', function(response) {
        if (response.access_token) {
            // Handle the access token to Login a user
        }
    }, function(response) {
        //error
    });
}

```

##Password Strength Feature
Password strength is a measure of the effectiveness of a password in resisting guessing and brute-force attacks. In its usual form, it estimates how many trials an attacker who does not have direct access to the password would need, on an average, to guess it correctly. The strength of a password is a function of length, complexity, and unpredictability.
It Includes regular expressions to check if it has:

- At least one uppercase and one lowercase letter
- At least one number
- At least one special character
- And maximum and minimum length derived from your password length.

> How does it work?

> If the password has the right length, it is evaluated as follows:

> a) "Bad" condition/case met: Weak password, password length equals to the minimum password length.

> b) "Weak" condition/case met: Weak password, password equals to the minimum password length with the mix of upper and lower characters or Only numbers are included in the password.

> c) "Good" condition/case met: Medium strength password, password length greater than the minimum password length with the mix of upper and lower characters and a special symbol or if 12 or more numbers are included in the password

> d) "Strong" condition/case met: Strong password, Password length greater than 6 and includes upper case letter, lower case letter, number and a special character.

> e) "Secure" condition/case met: Secure password, characteristics of "strong" with password length greater than 12.

####Steps to Implement:
**Step 1**: Add the JavaScript framework reference to your web page – LoginRadius User Registration framework, If you have already referenced it please skip the ​step.

```
 <script src="https://auth.lrcontent.com/v1/js/LoginRadiusRaaS.js"></script>
```

**Step 2**: Configure the Password strength parameter to User Registration JS:

```
	var raasOptions={};
    raasOptions.checkPasswordStrength = true;
```

**Step 3**: Hook to customise​ the password strength:

> The hook is not necessary to use Password strength feature, In cases where the hook is not configured the default colour​ and message scheme will be used. and In case of any missed case, the default configuration of password strength feature will be used for the missing case.

**#min_length** can be used to show your minimum length of the password in messages.

```
LoginRadiusRaaS.$hooks.setPasswordMeterConfiguration([{
    case: "Worst", // Case Can not be changed
    message: "#min_length length is required",//Your minimum password length message.
    color: "Red" // Above message color
}, {
    case: "Bad", // Case Can not be changed
    message: "Bad",
    color: "Red"
}, {
    case: "weak", // Case Can not be changed
    message: "weak",
    color: "yellow"
}, {
    case: "Good", // Case Can not be change
    message: "Good",
    color: "Green"
}, {
    case: "Strong", // Case Can not be changed
    message: "Strong",
    color: "Green"
}, {
    case: "Secure", // Case Can not be changed
    message: "Secure",
    color: "Blue"
}]);
```

> Please Note

> In the above password strength configuration hook, case is not subject to change, only the message and colour scheme can be changed.
